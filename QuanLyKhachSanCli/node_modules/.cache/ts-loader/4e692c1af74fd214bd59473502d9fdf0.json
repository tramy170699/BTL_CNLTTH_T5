{"remainingRequest":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\babel-loader\\lib\\index.js!E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\ts-loader\\index.js??ref--13-2!E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\src\\router.ts","dependencies":[{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\src\\router.ts","mtime":1606271908184},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\.babelrc","mtime":1606271890641},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1606271892512},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\babel-loader\\lib\\index.js","mtime":1606271892289},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\ts-loader\\index.js","mtime":1606271904472}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport Router from 'vue-router';\nimport DanhSachNhanVien from './components/NhanVien/DanhSachNhanVien.vue';\nimport Login from './components/Login/Login.vue';\nimport store from './store/store';\nimport { HTTP } from './HTTPServices';\nVue.use(Router);\nexport default new Router({\n  routes: [{\n    path: '/',\n    name: 'login',\n    component: Login\n  }, {\n    path: '/nhanvien',\n    name: 'nhanVien',\n    component: DanhSachNhanVien,\n    beforeEnter: guardRoute\n  }]\n});\n\nfunction guardRoute(to, from, next) {\n  var isAuthenticated = store.state.user && store.state.user.AccessToken ? store.state.user.AccessToken.IsAuthenticated : false;\n\n  if (!isAuthenticated) {\n    next({\n      path: '/login',\n      query: {\n        redirect: to.fullPath\n      }\n    });\n  } else {\n    HTTP.get('/auth/validate-token/').then(function (response) {\n      next();\n    }).catch(function (e) {\n      store.commit('CLEAR_ALL_DATA');\n      next({\n        path: '/login',\n        query: {\n          redirect: to.fullPath\n        }\n      });\n    });\n  }\n}",{"version":3,"sources":["E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\src\\router.ts"],"names":[],"mappings":"AAAA,OAAO,GAAP,MAAgB,KAAhB;AACA,OAAO,MAAP,MAA8B,YAA9B;AAEA,OAAO,gBAAP,MAA6B,4CAA7B;AAGA,OAAO,KAAP,MAAkB,8BAAlB;AACA,OAAO,KAAP,MAAkB,eAAlB;AACA,SAAS,IAAT,QAAqB,gBAArB;AAIA,IAAI,GAAJ,CAAQ,MAAR;AACA,eAAe,IAAI,MAAJ,CAAW;AACtB,UAAQ,CACJ;AACI,UAAM,GADV;AAEI,UAAM,OAFV;AAGI,eAAW;AAHf,GADI,EAMJ;AACI,UAAM,WADV;AAEI,UAAM,UAFV;AAGI,eAAW,gBAHf;AAII,iBAAa;AAJjB,GANI;AADc,CAAX,CAAf;;AAmBA,SAAS,UAAT,CAAoB,EAApB,EAA+B,IAA/B,EAA4C,IAA5C,EAAqD;AACjD,MAAM,kBAAkB,MAAM,KAAN,CAAY,IAAZ,IAAoB,MAAM,KAAN,CAAY,IAAZ,CAAiB,WAArC,GAAmD,MAAM,KAAN,CAAY,IAAZ,CAAiB,WAAjB,CAA6B,eAAhF,GAAkG,KAA1H;;AACA,MAAI,CAAC,eAAL,EAAsB;AAClB,SAAK;AACD,YAAM,QADL;AAED,aAAO;AACH,kBAAU,GAAG;AADV;AAFN,KAAL;AAMH,GAPD,MAOO;AACH,SAAK,GAAL,CAAS,uBAAT,EACK,IADL,CACU,oBAAW;AACb;AACH,KAHL,EAIK,KAJL,CAIW,aAAI;AACP,YAAM,MAAN,CAAa,gBAAb;AACA,WAAK;AACD,cAAM,QADL;AAED,eAAO;AACH,oBAAU,GAAG;AADV;AAFN,OAAL;AAMH,KAZL;AAaH;AACJ","sourcesContent":["import Vue from 'vue';\r\nimport Router, { Route } from 'vue-router';\r\n\r\nimport DanhSachNhanVien from './components/NhanVien/DanhSachNhanVien.vue';\r\n\r\n\r\nimport Login from './components/Login/Login.vue';\r\nimport store from './store/store';\r\nimport { HTTP } from './HTTPServices';\r\n\r\n\r\n\r\nVue.use(Router);\r\nexport default new Router({\r\n    routes: [\r\n        {\r\n            path: '/',\r\n            name: 'login',\r\n            component: Login,\r\n        }, \r\n        {\r\n            path: '/nhanvien',\r\n            name: 'nhanVien',\r\n            component: DanhSachNhanVien,\r\n            beforeEnter: guardRoute\r\n        },\r\n        \r\n              \r\n    ],\r\n});\r\n\r\n\r\nfunction guardRoute(to: Route, from: Route, next: any): void {\r\n    const isAuthenticated = store.state.user && store.state.user.AccessToken ? store.state.user.AccessToken.IsAuthenticated : false;\r\n    if (!isAuthenticated) {\r\n        next({\r\n            path: '/login',\r\n            query: {\r\n                redirect: to.fullPath\r\n            }\r\n        });\r\n    } else {\r\n        HTTP.get('/auth/validate-token/')\r\n            .then(response => {\r\n                next();\r\n            })\r\n            .catch(e => {\r\n                store.commit('CLEAR_ALL_DATA');\r\n                next({\r\n                    path: '/login',\r\n                    query: {\r\n                        redirect: to.fullPath\r\n                    }\r\n                });\r\n            });\r\n    }\r\n}"],"sourceRoot":""}]}