{"remainingRequest":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\src\\components\\NhanVien\\ThemSuaNhanVien.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\src\\components\\NhanVien\\ThemSuaNhanVien.vue","mtime":1606271908163},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1606271892512},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\babel-loader\\lib\\index.js","mtime":1606271892289},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\ts-loader\\index.js","mtime":1606271904472},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1606271892512},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js","mtime":1606271905940}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue } from 'vue-property-decorator';\nimport NhanVienApi, { NhanVienApiSearchParams } from '@/apiResources/NhanVienApi';\nimport { NhanVien } from '@/models/NhanVien';\nimport { Users } from '@/models/Users';\nimport { BoPhan } from '@/models/BoPhan';\nimport BoPhanApi, { BoPhanApiSearchParams } from '@/apiResources/BoPhanApi';\nimport { Validator } from 'vee-validate';\nexport default Vue.extend({\n    $_veeValidate: {\n        validator: 'new'\n    },\n\n    components: {},\n    data() {\n        return {\n            dialog: false,\n            isUpdate: false,\n            nhanVien: {\n                Users: {} as Users\n            } as NhanVien,\n            users: {} as Users,\n            dsBoPhan: [] as BoPhan[],\n            dsBoPhanLoading: false,\n            searchBoPhan: '',\n            searchParamsBoPhan: { includeEntities: true } as BoPhanApiSearchParams,\n            loading: false,\n            searchParamsNhanVien: {} as NhanVienApiSearchParams,\n        }\n\n    },\n    created() {\n        this.getDSBoPhan();\n    },\n    methods: {\n        show(isUpdate: boolean, item: any) {\n            this.dialog = true;\n            this.isUpdate = isUpdate;\n            this.nhanVien = item;\n            if (isUpdate == true) {\n                this.getDataFromApi(item.NhanVienID);\n            }\n            else\n                this.users = {} as Users\n        },\n        getDataFromApi(id: number): void {\n            NhanVienApi.detail(id).then(res => {\n                this.nhanVien = res;\n                this.users = res.Users as any;\n            });\n        },\n        save(): void {\n           \n            this.$validator.validateAll('frmAddEdit').then((res) => {\n                if (res) {\n                    this.nhanVien.Users = this.users;\n                    if (this.isUpdate) {\n                        this.loading = true;\n                        NhanVienApi.update(this.nhanVien.NhanVienID, this.nhanVien).then(res => {\n                            this.loading = false;\n                            this.dialog = false;\n                            this.$snotify.success('Cập nhật thành công!');\n                            this.$emit(\"getLaiDanhSach\");\n                        }).catch(res => {\n                            this.loading = false;\n                            this.$snotify.error('Cập nhật thất bại!');\n                        });\n                    } else {\n                        this.loading = true;\n                        NhanVienApi.insert(this.nhanVien).then(res => {\n                            this.nhanVien = res;\n                            this.isUpdate = true;\n                            this.loading = false;\n                            this.$snotify.success('Thêm mới thành công!');\n                            this.dialog = false\n                            this.$emit(\"getLaiDanhSach\");\n                        }).catch(res => {\n                            this.loading = false;\n                            this.$snotify.error('Thêm mới thất bại!');\n                        });\n                    }\n                }\n            });\n        },\n\n        getDSBoPhan(): void {\n            BoPhanApi.search(this.searchParamsBoPhan).then(res => {\n                this.dsBoPhan = res.Data;\n            });\n        },\n    }\n});\n",{"version":3,"sources":["ThemSuaNhanVien.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ThemSuaNhanVien.vue","sourceRoot":"src\\components\\NhanVien","sourcesContent":["<template>\r\n    <v-dialog v-model=\"dialog\" width=\"500\" persistent scrollable>\r\n        <v-container pa-0 grid-list-md>\r\n            <v-card>\r\n                <v-card-title class=\"primary white--text\" style=\"padding: 5px 15px 5px 15px\">\r\n                    <h3>{{isUpdate ? 'Cập nhật nhân viên' : 'Thêm mới nhân viên'}}</h3>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn class=\"white--text ma-0\" small @click.native=\"dialog = false\" icon dark><v-icon>close</v-icon></v-btn>\r\n                </v-card-title>\r\n\r\n                <v-card-text>\r\n                    <v-form scope=\"frmAddEdit\">\r\n                        <v-layout row wrap>\r\n                            <v-flex xs6>\r\n                                <v-text-field v-model=\"nhanVien.TenNhanVien\"\r\n                                              label=\"Tên nhân viên\"\r\n                                              type=\"text\"\r\n                                              :error-messages=\"errors.collect('Tên nhân viên', 'frmAddEdit')\"\r\n                                              v-validate=\"'required'\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Tên nhân viên\"\r\n                                              clearable></v-text-field>\r\n                                <v-spacer></v-spacer>\r\n                            </v-flex>\r\n\r\n                            <v-flex xs6>\r\n                                <v-text-field \r\n                                              v-model=\"nhanVien.SoDienThoai\"\r\n                                              label=\"Số điện thoại\"\r\n                                              type=\"number\"\r\n                                              :error-messages=\"errors.collect('Số điện thoại', 'frmAddEdit')\"\r\n                                              \r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Số điện thoại\"\r\n                                              v-validate=\"{ required: true, max:10, min:10 }\"\r\n                                              clearable></v-text-field>\r\n                            </v-flex>\r\n\r\n                            <v-flex xs6>\r\n                                <v-autocomplete v-model=\"nhanVien.BoPhanID\"\r\n                                                :items=\"dsBoPhan\"\r\n                                                :loading=\"dsBoPhanLoading\"\r\n                                                :search-input.sync=\"searchBoPhan\"\r\n                                                item-text=\"TenBoPhan\"\r\n                                                item-value=\"BoPhanID\"\r\n                                                label=\"Tên bộ phận\"\r\n                                                placeholder=\"Nhập tên bộ phận\"\r\n                                                :error-messages=\"errors.collect('BoPhanID', 'frmAddEdit')\"\r\n                                                v-validate=\"''\"\r\n                                                data-vv-scope=\"frmAddEdit\"\r\n                                                data-vv-name=\"BoPhanID\"\r\n                                                clearable></v-autocomplete>\r\n                            </v-flex>\r\n                            <v-flex xs6>\r\n                                <v-text-field v-model=\"users.UserName\"\r\n                                              label=\"Tên đăng nhập\"\r\n                                              type=\"text\"\r\n                                              :error-messages=\"errors.collect('Tên đăng nhập', 'frmAddEdit')\"\r\n                                              v-validate=\"'required'\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Tên đăng nhập\"\r\n                                              :disabled=\"isUpdate\"\r\n                                              clearable></v-text-field>\r\n                            </v-flex>\r\n                            <v-flex xs6>\r\n                                <v-text-field v-model=\"users.Password\"\r\n                                              label=\"Mật khẩu\"\r\n                                              :error-messages=\"errors.collect('Mật khẩu', 'frmAddEdit')\"\r\n                                              v-validate=\"{ required: true, min: 8 }\"\r\n                                              data-vv-scope=\"frmAddEdit\"\r\n                                              data-vv-name=\"Mật khẩu\"\r\n                                              v-show=\"!isUpdate\"\r\n                                              ></v-text-field>\r\n                            </v-flex>\r\n                        </v-layout>\r\n                    </v-form>\r\n                </v-card-text>\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n                    <v-btn class=\"primary\" :disabled=\"loading\" :loading=\"loading\" @click.native=\"save\">{{isUpdate?'Cập nhật':'Thêm mới'}}</v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-container>\r\n    </v-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n    import { Vue } from 'vue-property-decorator';\r\n    import NhanVienApi, { NhanVienApiSearchParams } from '@/apiResources/NhanVienApi';\r\n    import { NhanVien } from '@/models/NhanVien';\r\n    import { Users } from '@/models/Users';\r\n    import { BoPhan } from '@/models/BoPhan';\r\n    import BoPhanApi, { BoPhanApiSearchParams } from '@/apiResources/BoPhanApi';\r\n    import { Validator } from 'vee-validate';\r\n    export default Vue.extend({\r\n        $_veeValidate: {\r\n            validator: 'new'\r\n        },\r\n\r\n        components: {},\r\n        data() {\r\n            return {\r\n                dialog: false,\r\n                isUpdate: false,\r\n                nhanVien: {\r\n                    Users: {} as Users\r\n                } as NhanVien,\r\n                users: {} as Users,\r\n                dsBoPhan: [] as BoPhan[],\r\n                dsBoPhanLoading: false,\r\n                searchBoPhan: '',\r\n                searchParamsBoPhan: { includeEntities: true } as BoPhanApiSearchParams,\r\n                loading: false,\r\n                searchParamsNhanVien: {} as NhanVienApiSearchParams,\r\n            }\r\n\r\n        },\r\n        created() {\r\n            this.getDSBoPhan();\r\n        },\r\n        methods: {\r\n            show(isUpdate: boolean, item: any) {\r\n                this.dialog = true;\r\n                this.isUpdate = isUpdate;\r\n                this.nhanVien = item;\r\n                if (isUpdate == true) {\r\n                    this.getDataFromApi(item.NhanVienID);\r\n                }\r\n                else\r\n                    this.users = {} as Users\r\n            },\r\n            getDataFromApi(id: number): void {\r\n                NhanVienApi.detail(id).then(res => {\r\n                    this.nhanVien = res;\r\n                    this.users = res.Users as any;\r\n                });\r\n            },\r\n            save(): void {\r\n               \r\n                this.$validator.validateAll('frmAddEdit').then((res) => {\r\n                    if (res) {\r\n                        this.nhanVien.Users = this.users;\r\n                        if (this.isUpdate) {\r\n                            this.loading = true;\r\n                            NhanVienApi.update(this.nhanVien.NhanVienID, this.nhanVien).then(res => {\r\n                                this.loading = false;\r\n                                this.dialog = false;\r\n                                this.$snotify.success('Cập nhật thành công!');\r\n                                this.$emit(\"getLaiDanhSach\");\r\n                            }).catch(res => {\r\n                                this.loading = false;\r\n                                this.$snotify.error('Cập nhật thất bại!');\r\n                            });\r\n                        } else {\r\n                            this.loading = true;\r\n                            NhanVienApi.insert(this.nhanVien).then(res => {\r\n                                this.nhanVien = res;\r\n                                this.isUpdate = true;\r\n                                this.loading = false;\r\n                                this.$snotify.success('Thêm mới thành công!');\r\n                                this.dialog = false\r\n                                this.$emit(\"getLaiDanhSach\");\r\n                            }).catch(res => {\r\n                                this.loading = false;\r\n                                this.$snotify.error('Thêm mới thất bại!');\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n\r\n            getDSBoPhan(): void {\r\n                BoPhanApi.search(this.searchParamsBoPhan).then(res => {\r\n                    this.dsBoPhan = res.Data;\r\n                });\r\n            },\r\n        }\r\n    });\r\n</script>\r\n\r\n"]}]}