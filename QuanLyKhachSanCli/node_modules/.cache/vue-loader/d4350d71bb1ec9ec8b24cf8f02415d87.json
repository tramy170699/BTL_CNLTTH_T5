{"remainingRequest":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\src\\components\\NhanVien\\DanhSachNhanVien.vue?vue&type=script&lang=ts&","dependencies":[{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\src\\components\\NhanVien\\DanhSachNhanVien.vue","mtime":1606271908154},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1606271892512},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\babel-loader\\lib\\index.js","mtime":1606271892289},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\ts-loader\\index.js","mtime":1606271904472},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1606271892512},{"path":"E:\\Document\\Kì 1 năm 4\\CNLTTH\\Project_QLKS\\BTL_CNLTTH_T5\\QuanLyKhachSanCli\\node_modules\\vue-loader\\lib\\index.js","mtime":1606271905940}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue } from 'vue-property-decorator';\nimport NhanVienApi, { NhanVienApiSearchParams } from '@/apiResources/NhanVienApi';\nimport { NhanVien } from '@/models/NhanVien';\nimport BoPhanApi, { BoPhanApiSearchParams } from '@/apiResources/BoPhanApi';\nimport { BoPhan } from '@/models/BoPhan';\nimport ThemSuaNhanVien from './ThemSuaNhanVien.vue';\n\nexport default Vue.extend({\n    components: {\n        ThemSuaNhanVien\n    },\n    data() {\n        return {\n            dsBoPhan: [] as BoPhan[],\n            dsNhanVien: [] as NhanVien[],\n            tableHeader: [\n                { text: 'STT', value: 'TenNhanVien', align: 'center', sortable: true },\n                { text: 'Tên nhân viên', value: 'TenNhanVien', align: 'center', sortable: true },\n                { text: 'Số điện thoại', value: 'SoDienThoai', align: 'center', sortable: true },\n                { text: 'Tên đăng nhập', value: 'TenDangNhap', align: 'center', sortable: true },\n                { text: 'Tên bộ phận', value: 'BoPhanID', align: 'center', sortable: true },\n                { text: 'Thao tác', value: '#', align: 'center', sortable: false },\n            ],\n            searchParamsNhanVien: { includeEntities: true, rowsPerPage: 10 } as NhanVienApiSearchParams,\n            searchParamsBoPhan: { includeEntities: true, rowsPerPage: 0 } as BoPhanApiSearchParams,\n            loadingTable: false,\n            selectedNhanVien: {} as NhanVien,\n            dialogConfirmDelete: false,\n        }\n    },\n    watch: {\n    },\n    created() {\n        this.getDSBoPhan();\n        this.getDataFromApi(this.searchParamsNhanVien);\n    },\n    methods: {\n        getDataFromApi(searchParamsNhanVien: NhanVienApiSearchParams): void {\n            this.loadingTable = true;\n            NhanVienApi.search(searchParamsNhanVien).then(res => {\n                this.dsNhanVien = res.Data;\n                this.searchParamsNhanVien.totalItems = res.Pagination.totalItems;\n                this.loadingTable = false;\n            });\n        },\n        showModalThemSua(isUpdate: boolean, item: any) { // refs gọi từ cha -=> con \n            (this.$refs.themSuaNhanVien as any).show(isUpdate, item); // gọi đến hàm show bên modal con\n        },\n        confirmDelete(nhanVien: NhanVien): void {\n            this.selectedNhanVien = nhanVien;\n            this.dialogConfirmDelete = true;\n        },\n        deleteNhanVien(): void {\n            NhanVienApi.delete(this.selectedNhanVien.NhanVienID).then(res => {\n                this.$snotify.success('Xóa thành công!');\n                this.getDataFromApi(this.searchParamsNhanVien);\n                this.dialogConfirmDelete = false;\n            }).catch(res => {\n                this.$snotify.error('Xóa thất bại!');\n            });\n        },\n        \n        getDSBoPhan(): void {\n            BoPhanApi.search(this.searchParamsBoPhan).then(res => {\n                this.dsBoPhan = res.Data;\n            });\n        },\n    }\n});\n",{"version":3,"sources":["DanhSachNhanVien.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DanhSachNhanVien.vue","sourceRoot":"src\\components\\NhanVien","sourcesContent":["<template>\r\n    <v-card width=\"100%\" style=\"padding: 20px\">\r\n        <v-layout row wrap>\r\n            <v-flex xs12>\r\n                <h3>Danh khách nhân viên</h3>\r\n            </v-flex>\r\n            <v-flex xs12>\r\n                <v-layout row wrap>\r\n                    <v-flex xs12>\r\n                        <v-layout nowrap>\r\n                            <v-flex xs4>\r\n                                <v-text-field label=\"Tìm kiếm\"\r\n                                              append-icon=\"search\" ma-0 pa-0 hide-details\r\n                                              placeholder=\"Nhập tên nhân viên, số điện thoại...\"\r\n                                              v-model=\"searchParamsNhanVien.query\"\r\n                                              @input=\"getDataFromApi(searchParamsNhanVien)\"></v-text-field>\r\n                            </v-flex>\r\n                            <v-flex xs4>\r\n                                <v-autocomplete v-model=\"searchParamsNhanVien.boPhanID\"\r\n                                                :items=\"dsBoPhan\"\r\n                                                item-text=\"TenBoPhan\"\r\n                                                item-value=\"BoPhanID\"\r\n                                                label=\"Bộ phận\"\r\n                                                placeholder=\"Chọn bộ phận\"\r\n                                                @input=\"getDataFromApi(searchParamsNhanVien)\"\r\n                                                clearable></v-autocomplete>\r\n                            </v-flex>\r\n                            <v-spacer></v-spacer>\r\n                            <v-btn small color=\"primary\" style=\"margin-top: auto\" @click=\"showModalThemSua(false, {})\">+ Thêm mới</v-btn>\r\n                        </v-layout>\r\n                    </v-flex>\r\n                    <v-flex xs12>\r\n                        <v-data-table :headers=\"tableHeader\"\r\n                                      :items=\"dsNhanVien\"\r\n                                      @update:pagination=\"getDataFromApi\" :pagination.sync=\"searchParamsNhanVien\"\r\n                                      :total-items=\"searchParamsNhanVien.totalItems\"\r\n                                      :loading=\"loadingTable\"\r\n                                      class=\"table-border table\">\r\n                            <template slot=\"items\" slot-scope=\"props\">\r\n                                <td>{{ props.index + 1}}</td>\r\n                                <td>{{ props.item.TenNhanVien }}</td>\r\n                                <td>{{ props.item.SoDienThoai }}</td>\r\n                                <td>{{ props.item.Users? props.item.Users.UserName : '' }}</td>\r\n                                <td>{{ props.item.BoPhan ? props.item.BoPhan.TenBoPhan : \"\" }}</td>\r\n                                <td class=\"text-xs-center\" style=\"width:80px;\">\r\n                                    <v-btn flat icon small @click=\"showModalThemSua(true, props.item)\" class=\"ma-0\">\r\n                                        <v-icon small>edit</v-icon>\r\n                                    </v-btn>\r\n                                    <v-btn flat color=\"red\" icon small class=\"ma-0\" @click=\"confirmDelete(props.item)\">\r\n                                        <v-icon small>delete</v-icon>\r\n                                    </v-btn>\r\n                                </td>\r\n                                </td>\r\n                            </template>\r\n                        </v-data-table>\r\n                    </v-flex>\r\n                </v-layout>\r\n            </v-flex>\r\n            <v-dialog v-model=\"dialogConfirmDelete\" max-width=\"290\">\r\n                <v-card>\r\n                    <v-card-title class=\"headline\">Xác nhận xóa</v-card-title>\r\n                    <v-card-text class=\"pt-3\">Bạn có chắc chắn muốn xóa?</v-card-text>\r\n                    <v-card-actions>\r\n                        <v-spacer></v-spacer>\r\n                        <v-btn @click.native=\"dialogConfirmDelete=false\" flat>Hủy</v-btn>\r\n                        <v-btn color=\"red darken-1\" @click.native=\"deleteNhanVien\" flat>Xác Nhận</v-btn>\r\n                    </v-card-actions>\r\n                </v-card>\r\n            </v-dialog>\r\n            <them-sua-nhan-vien ref=\"themSuaNhanVien\" @getLaiDanhSach=\"getDataFromApi(searchParamsNhanVien)\"></them-sua-nhan-vien>\r\n\r\n        </v-layout>\r\n    </v-card>\r\n</template>\r\n<script lang=\"ts\">\r\n    import { Vue } from 'vue-property-decorator';\r\n    import NhanVienApi, { NhanVienApiSearchParams } from '@/apiResources/NhanVienApi';\r\n    import { NhanVien } from '@/models/NhanVien';\r\n    import BoPhanApi, { BoPhanApiSearchParams } from '@/apiResources/BoPhanApi';\r\n    import { BoPhan } from '@/models/BoPhan';\r\n    import ThemSuaNhanVien from './ThemSuaNhanVien.vue';\r\n\r\n    export default Vue.extend({\r\n        components: {\r\n            ThemSuaNhanVien\r\n        },\r\n        data() {\r\n            return {\r\n                dsBoPhan: [] as BoPhan[],\r\n                dsNhanVien: [] as NhanVien[],\r\n                tableHeader: [\r\n                    { text: 'STT', value: 'TenNhanVien', align: 'center', sortable: true },\r\n                    { text: 'Tên nhân viên', value: 'TenNhanVien', align: 'center', sortable: true },\r\n                    { text: 'Số điện thoại', value: 'SoDienThoai', align: 'center', sortable: true },\r\n                    { text: 'Tên đăng nhập', value: 'TenDangNhap', align: 'center', sortable: true },\r\n                    { text: 'Tên bộ phận', value: 'BoPhanID', align: 'center', sortable: true },\r\n                    { text: 'Thao tác', value: '#', align: 'center', sortable: false },\r\n                ],\r\n                searchParamsNhanVien: { includeEntities: true, rowsPerPage: 10 } as NhanVienApiSearchParams,\r\n                searchParamsBoPhan: { includeEntities: true, rowsPerPage: 0 } as BoPhanApiSearchParams,\r\n                loadingTable: false,\r\n                selectedNhanVien: {} as NhanVien,\r\n                dialogConfirmDelete: false,\r\n            }\r\n        },\r\n        watch: {\r\n        },\r\n        created() {\r\n            this.getDSBoPhan();\r\n            this.getDataFromApi(this.searchParamsNhanVien);\r\n        },\r\n        methods: {\r\n            getDataFromApi(searchParamsNhanVien: NhanVienApiSearchParams): void {\r\n                this.loadingTable = true;\r\n                NhanVienApi.search(searchParamsNhanVien).then(res => {\r\n                    this.dsNhanVien = res.Data;\r\n                    this.searchParamsNhanVien.totalItems = res.Pagination.totalItems;\r\n                    this.loadingTable = false;\r\n                });\r\n            },\r\n            showModalThemSua(isUpdate: boolean, item: any) { // refs gọi từ cha -=> con \r\n                (this.$refs.themSuaNhanVien as any).show(isUpdate, item); // gọi đến hàm show bên modal con\r\n            },\r\n            confirmDelete(nhanVien: NhanVien): void {\r\n                this.selectedNhanVien = nhanVien;\r\n                this.dialogConfirmDelete = true;\r\n            },\r\n            deleteNhanVien(): void {\r\n                NhanVienApi.delete(this.selectedNhanVien.NhanVienID).then(res => {\r\n                    this.$snotify.success('Xóa thành công!');\r\n                    this.getDataFromApi(this.searchParamsNhanVien);\r\n                    this.dialogConfirmDelete = false;\r\n                }).catch(res => {\r\n                    this.$snotify.error('Xóa thất bại!');\r\n                });\r\n            },\r\n            \r\n            getDSBoPhan(): void {\r\n                BoPhanApi.search(this.searchParamsBoPhan).then(res => {\r\n                    this.dsBoPhan = res.Data;\r\n                });\r\n            },\r\n        }\r\n    });\r\n</script>\r\n\r\n"]}]}